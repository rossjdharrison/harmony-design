#!/bin/sh
# Pre-commit hook to check for bridge validation anti-pattern

# Only run if Rust files are being committed
if git diff --cached --name-only | grep -q '\.rs$'; then
  echo "ğŸ” Checking for bridge validation anti-pattern..."
  
  if node scripts/quality-gates/check-bridge-validation.js; then
    echo "âœ… Bridge validation check passed"
  else
    echo ""
    echo "âŒ Bridge validation anti-pattern detected in your changes"
    echo "ğŸ“– See docs/bridge-validation-antipattern.md for guidance"
    echo ""
    echo "To bypass this check (not recommended):"
    echo "  git commit --no-verify"
    exit 1
  fi
fi