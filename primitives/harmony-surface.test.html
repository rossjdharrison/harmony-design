<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HarmonySurface Test</title>
  <link rel="stylesheet" href="../tokens/design-tokens.css">
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      padding: 2rem;
      background: #f0f0f0;
      line-height: 1.6;
    }

    .test-section {
      margin-bottom: 3rem;
    }

    .test-section h2 {
      margin-bottom: 1rem;
      color: #333;
    }

    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .test-label {
      font-size: 0.875rem;
      color: #666;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }

    .test-container {
      display: flex;
      flex-direction: column;
    }

    harmony-surface {
      min-height: 100px;
    }

    .content {
      color: #333;
    }

    .performance-info {
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 4px;
      padding: 1rem;
      margin-bottom: 2rem;
    }

    .performance-info h3 {
      margin-top: 0;
      color: #856404;
    }

    .performance-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .metric {
      background: white;
      padding: 0.75rem;
      border-radius: 4px;
      border: 1px solid #e0e0e0;
    }

    .metric-label {
      font-size: 0.75rem;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .metric-value {
      font-size: 1.5rem;
      font-weight: 600;
      color: #333;
      margin-top: 0.25rem;
    }

    .interactive-test {
      background: white;
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }

    .controls {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .control-group label {
      font-size: 0.875rem;
      font-weight: 600;
      color: #333;
    }

    select {
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 0.875rem;
    }

    #interactive-surface {
      min-height: 200px;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <h1>HarmonySurface Component Tests</h1>

  <div class="performance-info">
    <h3>âš¡ Performance Metrics</h3>
    <p>Target: &lt;16ms render time for 60fps</p>
    <div class="performance-metrics">
      <div class="metric">
        <div class="metric-label">Render Time</div>
        <div class="metric-value" id="render-time">--</div>
      </div>
      <div class="metric">
        <div class="metric-label">FPS</div>
        <div class="metric-value" id="fps">--</div>
      </div>
      <div class="metric">
        <div class="metric-label">Memory (approx)</div>
        <div class="metric-value" id="memory">--</div>
      </div>
    </div>
  </div>

  <div class="interactive-test">
    <h2>Interactive Test</h2>
    <div class="controls">
      <div class="control-group">
        <label for="elevation-select">Elevation:</label>
        <select id="elevation-select">
          <option value="flat">Flat</option>
          <option value="raised" selected>Raised</option>
          <option value="overlay">Overlay</option>
          <option value="modal">Modal</option>
        </select>
      </div>
      <div class="control-group">
        <label for="padding-select">Padding:</label>
        <select id="padding-select">
          <option value="none">None</option>
          <option value="xs">XS</option>
          <option value="sm">SM</option>
          <option value="md" selected>MD</option>
          <option value="lg">LG</option>
          <option value="xl">XL</option>
        </select>
      </div>
      <div class="control-group">
        <label for="radius-select">Radius:</label>
        <select id="radius-select">
          <option value="none">None</option>
          <option value="sm">SM</option>
          <option value="md" selected>MD</option>
          <option value="lg">LG</option>
          <option value="full">Full</option>
        </select>
      </div>
      <div class="control-group">
        <label for="background-select">Background:</label>
        <select id="background-select">
          <option value="primary" selected>Primary</option>
          <option value="secondary">Secondary</option>
          <option value="tertiary">Tertiary</option>
          <option value="transparent">Transparent</option>
        </select>
      </div>
    </div>
    <harmony-surface id="interactive-surface" elevation="raised" padding="md" radius="md" background="primary">
      <div class="content">
        <h3>Interactive Surface</h3>
        <p>Adjust the controls above to see different variants in real-time.</p>
      </div>
    </harmony-surface>
  </div>

  <div class="test-section">
    <h2>Elevation Variants</h2>
    <div class="test-grid">
      <div class="test-container">
        <div class="test-label">Flat (no shadow)</div>
        <harmony-surface elevation="flat" padding="md" radius="md">
          <div class="content">Flat elevation</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">Raised</div>
        <harmony-surface elevation="raised" padding="md" radius="md">
          <div class="content">Raised elevation</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">Overlay</div>
        <harmony-surface elevation="overlay" padding="md" radius="md">
          <div class="content">Overlay elevation</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">Modal</div>
        <harmony-surface elevation="modal" padding="md" radius="md">
          <div class="content">Modal elevation</div>
        </harmony-surface>
      </div>
    </div>
  </div>

  <div class="test-section">
    <h2>Padding Variants</h2>
    <div class="test-grid">
      <div class="test-container">
        <div class="test-label">None</div>
        <harmony-surface elevation="raised" padding="none" radius="md">
          <div class="content">No padding</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">XS (4px)</div>
        <harmony-surface elevation="raised" padding="xs" radius="md">
          <div class="content">XS padding</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">SM (8px)</div>
        <harmony-surface elevation="raised" padding="sm" radius="md">
          <div class="content">SM padding</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">MD (16px)</div>
        <harmony-surface elevation="raised" padding="md" radius="md">
          <div class="content">MD padding</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">LG (24px)</div>
        <harmony-surface elevation="raised" padding="lg" radius="md">
          <div class="content">LG padding</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">XL (32px)</div>
        <harmony-surface elevation="raised" padding="xl" radius="md">
          <div class="content">XL padding</div>
        </harmony-surface>
      </div>
    </div>
  </div>

  <div class="test-section">
    <h2>Radius Variants</h2>
    <div class="test-grid">
      <div class="test-container">
        <div class="test-label">None (0)</div>
        <harmony-surface elevation="raised" padding="md" radius="none">
          <div class="content">No radius</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">SM (4px)</div>
        <harmony-surface elevation="raised" padding="md" radius="sm">
          <div class="content">SM radius</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">MD (8px)</div>
        <harmony-surface elevation="raised" padding="md" radius="md">
          <div class="content">MD radius</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">LG (16px)</div>
        <harmony-surface elevation="raised" padding="md" radius="lg">
          <div class="content">LG radius</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">Full (9999px)</div>
        <harmony-surface elevation="raised" padding="md" radius="full">
          <div class="content">Full radius</div>
        </harmony-surface>
      </div>
    </div>
  </div>

  <div class="test-section">
    <h2>Background Variants</h2>
    <div class="test-grid">
      <div class="test-container">
        <div class="test-label">Primary</div>
        <harmony-surface elevation="raised" padding="md" radius="md" background="primary">
          <div class="content">Primary background</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">Secondary</div>
        <harmony-surface elevation="raised" padding="md" radius="md" background="secondary">
          <div class="content">Secondary background</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">Tertiary</div>
        <harmony-surface elevation="raised" padding="md" radius="md" background="tertiary">
          <div class="content">Tertiary background</div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">Transparent</div>
        <harmony-surface elevation="raised" padding="md" radius="md" background="transparent">
          <div class="content">Transparent background</div>
        </harmony-surface>
      </div>
    </div>
  </div>

  <div class="test-section">
    <h2>Combined Variants</h2>
    <div class="test-grid">
      <div class="test-container">
        <div class="test-label">Card Style</div>
        <harmony-surface elevation="raised" padding="lg" radius="md" background="primary">
          <div class="content">
            <h3 style="margin-top: 0;">Card Title</h3>
            <p>This looks like a typical card component with raised elevation, medium padding and radius.</p>
          </div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">Modal Style</div>
        <harmony-surface elevation="modal" padding="xl" radius="lg" background="primary">
          <div class="content">
            <h3 style="margin-top: 0;">Modal Dialog</h3>
            <p>High elevation with large padding and radius for modal dialogs.</p>
          </div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">Flat Panel</div>
        <harmony-surface elevation="flat" padding="md" radius="none" background="secondary">
          <div class="content">
            <h3 style="margin-top: 0;">Flat Panel</h3>
            <p>No elevation or radius, good for subtle containers.</p>
          </div>
        </harmony-surface>
      </div>
      <div class="test-container">
        <div class="test-label">Pill Button</div>
        <harmony-surface elevation="raised" padding="sm" radius="full" background="primary">
          <div class="content" style="text-align: center;">
            Pill-shaped surface
          </div>
        </harmony-surface>
      </div>
    </div>
  </div>

  <script type="module">
    import './harmony-surface.js';

    // Interactive controls
    const interactiveSurface = document.getElementById('interactive-surface');
    const elevationSelect = document.getElementById('elevation-select');
    const paddingSelect = document.getElementById('padding-select');
    const radiusSelect = document.getElementById('radius-select');
    const backgroundSelect = document.getElementById('background-select');

    elevationSelect.addEventListener('change', (e) => {
      interactiveSurface.setAttribute('elevation', e.target.value);
    });

    paddingSelect.addEventListener('change', (e) => {
      interactiveSurface.setAttribute('padding', e.target.value);
    });

    radiusSelect.addEventListener('change', (e) => {
      interactiveSurface.setAttribute('radius', e.target.value);
    });

    backgroundSelect.addEventListener('change', (e) => {
      interactiveSurface.setAttribute('background', e.target.value);
    });

    // Performance monitoring
    let frameCount = 0;
    let lastTime = performance.now();
    let fps = 0;

    function measurePerformance() {
      const now = performance.now();
      frameCount++;

      if (now >= lastTime + 1000) {
        fps = Math.round((frameCount * 1000) / (now - lastTime));
        document.getElementById('fps').textContent = fps;
        frameCount = 0;
        lastTime = now;
      }

      requestAnimationFrame(measurePerformance);
    }

    // Measure render time
    const renderStart = performance.now();
    requestAnimationFrame(() => {
      const renderTime = (performance.now() - renderStart).toFixed(2);
      document.getElementById('render-time').textContent = `${renderTime}ms`;
      
      // Check if within budget
      const renderTimeEl = document.getElementById('render-time');
      if (parseFloat(renderTime) > 16) {
        renderTimeEl.style.color = '#dc3545';
      } else {
        renderTimeEl.style.color = '#28a745';
      }
    });

    // Start FPS monitoring
    measurePerformance();

    // Memory monitoring (approximate)
    if (performance.memory) {
      setInterval(() => {
        const usedMemory = (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
        document.getElementById('memory').textContent = `${usedMemory}MB`;
        
        const memoryEl = document.getElementById('memory');
        if (parseFloat(usedMemory) > 50) {
          memoryEl.style.color = '#dc3545';
        } else {
          memoryEl.style.color = '#28a745';
        }
      }, 2000);
    } else {
      document.getElementById('memory').textContent = 'N/A';
    }

    // Log component registration
    console.log('âœ… HarmonySurface component tests loaded');
    console.log('ðŸ“Š Performance monitoring active');
    console.log('ðŸŽ¯ Target: <16ms render time, 60fps, <50MB memory');
  </script>
</body>
</html>